<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cursed Maze</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: #0f0;
      font-family: monospace;
    }
    #passwordGate {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: black;
      color: #0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    #passwordGate input, #passwordGate button {
      font-size: 18px;
      margin: 10px;
      padding: 10px;
      background: black;
      border: 2px solid #0f0;
      color: #0f0;
    }
    #mazeContainer {
      display: none;
      width: 300px;
      height: 300px;
      background: #0f0;
      margin: 40px auto;
      position: relative;
      border: 5px solid #0f0;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>

<div id="passwordGate">
  <h2>Enter Password to Access</h2>
  <input id="pwInput" type="password" placeholder="Password">
  <button id="pwBtn">Submit</button>
  <p id="pwError" style="display:none; color:red;">Wrong password!</p>
</div>

<div id="mazeContainer">
  <canvas id="mazeCanvas" width="300" height="300"></canvas>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const correctPassword = 'yourhacked';
  const pwGate = document.getElementById('passwordGate');
  const pwInput = document.getElementById('pwInput');
  const pwBtn = document.getElementById('pwBtn');
  const pwError = document.getElementById('pwError');
  const mazeContainer = document.getElementById('mazeContainer');

  // Levels: 2 easy/medium, 1 hard (last)
  const levels = [
    {
      name: "Easy",
      map: [
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,1,0,0,0,0,1],
        [1,0,1,0,1,0,1,1,0,1],
        [1,0,1,0,0,0,1,0,0,1],
        [1,0,1,1,1,0,1,0,1,1],
        [1,0,0,0,1,0,0,0,1,1],
        [1,1,1,0,1,1,1,0,1,1],
        [1,0,0,0,0,0,1,0,0,1],
        [1,0,1,1,1,0,1,1,0,1],
        [1,1,1,1,1,1,1,1,1,1],
      ]
    },
    {
      name: "Medium",
      map: [
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,0,1,0,1],
        [1,0,0,0,0,1,0,1,0,1],
        [1,1,1,1,0,1,0,1,0,1],
        [1,0,0,1,0,0,0,1,0,1],
        [1,0,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,1,0,1],
        [1,1,1,1,1,1,1,1,1,1],
      ]
    },
    {
      name: "Hard",
      map: [
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,1,0,0,0,1,0,0,1],
        [1,0,1,0,1,0,1,1,0,1],
        [1,0,1,0,1,0,0,0,0,1],
        [1,0,1,0,1,1,1,1,1,1],
        [1,0,1,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,1,0,1],
        [1,1,1,1,1,1,0,1,0,1],
        [1,1,1,1,1,1,1,1,1,1],
      ]
    }
  ];

  let levelOrder = [];
  let currentLevel = 0;

  const canvas = document.getElementById("mazeCanvas");
  const ctx = canvas.getContext("2d");

  const blockSize = 30;
  let player = { x: 1, y: 1 };
  const end = { x: 8, y: 7 };

  function shuffleLevels() {
    const temp = levels.slice(0, 2);
    levelOrder = temp.sort(() => Math.random() - 0.5);
    levelOrder.push(levels[2]); // Hard level always last
  }

  function drawMaze() {
    const map = levelOrder[currentLevel].map;
    for (let y = 0; y < map.length; y++) {
      for (let x = 0; x < map[y].length; x++) {
        ctx.fillStyle = map[y][x] === 1 ? "#000" : "#fff";
        ctx.fillRect(x * blockSize, y * blockSize, blockSize, blockSize);
      }
    }
    ctx.fillStyle = "blue";
    ctx.fillRect(end.x * blockSize, end.y * blockSize, blockSize, blockSize);
    ctx.fillStyle = "red";
    ctx.fillRect(player.x * blockSize, player.y * blockSize, blockSize, blockSize);
  }

  function move(dx, dy) {
    const map = levelOrder[currentLevel].map;
    const newX = player.x + dx;
    const newY = player.y + dy;
    if (map[newY][newX] === 0) {
      player.x = newX;
      player.y = newY;
      drawMaze();
      if (player.x === end.x && player.y === end.y) {
        currentLevel++;
        if (currentLevel < levelOrder.length) {
          alert(`âœ… Level ${currentLevel} passed!`);
          player = { x: 1, y: 1 };
          drawMaze();
        } else {
          alert("ðŸŽ‰ You passed the human test!");
          location.reload();
        }
      }
    } else {
      player = { x: 1, y: 1 };
      drawMaze();
    }
  }

  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowUp" || e.key === "w") move(0, -1);
    if (e.key === "ArrowDown" || e.key === "s") move(0, 1);
    if (e.key === "ArrowLeft" || e.key === "a") move(-1, 0);
    if (e.key === "ArrowRight" || e.key === "d") move(1, 0);
  });

  pwBtn.addEventListener('click', () => {
    const val = pwInput.value.trim().toLowerCase();
    if (val === correctPassword) {
      pwGate.style.display = 'none';
      mazeContainer.style.display = 'block';
      shuffleLevels();
      drawMaze();
    } else {
      pwError.style.display = 'block';
    }
  });

  pwInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') pwBtn.click();
  });
});
</script>

</body>
</html>
